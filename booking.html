<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pedir cita - BarberiaGonzalo</title>
    <style>
      body{font-family:Inter,system-ui,Arial;margin:0;background:#0b0f14;color:#e6eef8}
      .wrap{max-width:720px;margin:40px auto;padding:20px}
      .card{background:#0f1720;padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
      label{display:block;margin-top:12px;font-weight:600}
      input,select{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:#091218;color:#fff}
      .actions{display:flex;gap:12px;margin-top:16px}
      button{padding:10px 14px;border-radius:8px;border:none;cursor:pointer}
      .btn-primary{background:#ff8a00;color:#071217;font-weight:700}
      .btn-cancel{background:#222;color:#fff}
      .notice{margin-top:14px;padding:12px;background:#0b1a12;border-radius:8px}
    </style>
  </head>
  <body>
    <a href="barberiagonzalo.html" style="position:fixed;left:14px;top:14px;z-index:1000;background:rgba(0,0,0,0.5);color:#fff;padding:8px 10px;border-radius:8px;text-decoration:none;display:flex;align-items:center;gap:8px;font-weight:700">
      <span style="transform:translateY(1px);">←</span>
      <span>Volver</span>
    </a>
    <div class="wrap">
      <h1>Pedir cita</h1>
      <div class="card">
        <form id="bookingForm">
          <label for="date">Fecha</label>
          <input type="date" id="date" name="date" required />

          <label for="time">Hora</label>
          <select id="time" name="time" required>
            <option value="09:00">09:00</option>
            <option value="10:00">10:00</option>
            <option value="11:00">11:00</option>
            <option value="12:00">12:00</option>
            <option value="15:00">15:00</option>
            <option value="16:00">16:00</option>
            <option value="17:00">17:00</option>
            <option value="18:00">18:00</option>
          </select>

          <label for="service">Servicio</label>
          <select id="service" name="service">
            <option value="corte">Corte de pelo — 15€</option>
            <option value="corte_barba">Corte de pelo + barba — 18€</option>
          </select>

          <div class="actions">
            <button type="submit" class="btn-primary">Confirmar cita</button>
            <button type="button" id="cancelBtn" class="btn-cancel">Cancelar cita</button>
          </div>
        </form>

        <div id="status" class="notice" style="display:none"></div>
      </div>
    </div>

    <script>
      const form = document.getElementById('bookingForm');
      const status = document.getElementById('status');
      const cancelBtn = document.getElementById('cancelBtn');

      function showBooking(){
        const b = JSON.parse(localStorage.getItem('barber_booking')||'null');
        if(!b){ status.style.display='none'; return }
        status.style.display='block';
        status.innerHTML = `Tienes una cita el <strong>${b.date}</strong> a las <strong>${b.time}</strong> — Servicio: <strong>${b.serviceLabel}</strong>.`;
      }

      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const date = form.date.value;
        const time = form.time.value;
        const service = form.service.value;
        const serviceLabel = form.service.options[form.service.selectedIndex].text;
        if(!date || !time){ alert('Selecciona fecha y hora'); return }
        const booking = {date,time,service,serviceLabel,created:Date.now()};
        localStorage.setItem('barber_booking', JSON.stringify(booking));
        showBooking();
        alert('Cita confirmada: ' + date + ' ' + time + ' — ' + serviceLabel);
      });

      cancelBtn.addEventListener('click', ()=>{
        if(confirm('¿Cancelar la cita existente?')){
          localStorage.removeItem('barber_booking');
          showBooking();
        }
      });

      // init
      showBooking();
    </script>
  </body>
</html>
